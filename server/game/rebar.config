{erl_first_files, [
    "lib/common/src/mgr/cache_srv.erl",
    "lib/cache/src/cache_behaviour.erl"
]}.

{sub_dirs, [
    "lib/common",
    "lib/cache",
    "lib/network",
    "apps/global"
]}.


{erl_opts, [
    no_debug_info
%%    debug_info,
%%    warnings_as_errors,
]}.


%%
{profiles, [
    {prod, [
        {relx, [
            {dev_mode, false},
            {include_erts, true}
        ]}
    ]},
    {dev, [
        {relx, [
            {dev_mode, true},
            {include_erts, true}
        ]}
    ]},
    {native, [
        {erl_opts, [{native, o3}]}
    ]}
]}.


{relx, [
    {release,
        {health, "1.4.1"},
        [
            http, storm, db, mgr,
            cache, common,
            health, robot,
            sasl
        ]},

    {sys_config, "./config/sys.config"},
    {vm_args, "./config/vm.args"},

    {dev_mode, true},
    {include_erts, false},

    {extended_start_script, true}]
}.


{deps, [
    {cowboy, {git, "https://github.com/ninenines/cowboy", {tag, "2.4.0"}}},
    {emysql, {git, "https://github.com/Eonblast/Emysql", {tag, "v0.4.1"}}},
    {eredis_pool, {git, "https://github.com/hiroeorz/eredis_pool"}},
    {erlydtl, {git, "https://github.com/erlydtl/erlydtl", {tag, "0.12.1"}}},
    {jiffy, {git, "https://github.com/davisp/jiffy", {tag, "0.15.2"}}},
    {lager, {git, "https://github.com/erlang-lager/lager", {tag, "3.6.3"}}},
    {jsx, {git, "https://github.com/talentdeficit/jsx", {tag, "v2.9.0"}}}
]}.
